<!Doctype html>
<html>
<head>
</head>
<body>



<script>


let div = document.createElement('div');
let input = document.createElement('input');

input.style.display = 'block';
input.style.height = '40px';
input.style.width = '400px';
input.style.border = '3px solid gray';
input.style.borderRadius = '3px';
input.style.fontSize = '30px';
input.style.paddingLeft = '10px';
input.style.paddingRight = '10px';
input.style.margin = 'auto';

div.style.width = '400px';
div.style.height = '305px';
div.style.fontSize = '25px';
div.style.paddingLeft = '10px';
div.style.paddingRight = '10px';
div.style.margin = 'auto';
div.style.marginBottom = '20px';

document.body.append(input);
document.body.append(div);

function debounce() {
  let timer;
  let i = 0;

  return function() {
  
  clearTimeout(timer)
  

  timer = setTimeout(() => {
    div.innerHTML = '';
    div.style.border = 'none';
    if (input.value === '') {
      
      return;
    }

    let url = `https://api.github.com/search/repositories?q=${input.value}`;
    fetch(url).then(response => response.json())
    .then(item => {
      for (let i = 0; i < 5; i++) {

        let p = document.createElement('p');

        p.textContent = item.items[i].name;
        p.dataset.owner = item.items[i].owner.login;
        p.dataset.stars = item.items[i].stargazers_count;
  
        div.append(p);
      } 
      div.style.border = '1px solid gray';
    })
    .catch(err => console.log(err))
  }, 700)
  }
}

let Debounce = debounce();

input.addEventListener('keyup', function() {

  Debounce();

});

div.addEventListener('mouseover', function(event) {
  
  if (event.target.tagName == 'P') {

  event.target.style.backgroundColor = 'aqua';
  event.target.style.cursor = 'pointer';

  }
})

div.addEventListener('mouseout', function(event) {

  event.target.style.background = 'none';

})

div.addEventListener('click', function(event) {
  if (event.target.tagName == 'P') {

  div.innerHTML = '';
  div.style.border = 'none';
  input.value = '';

  let section = document.createElement('section');

  section.style.width = '400px';
  section.style.fontSize = '25px';
  section.style.border = '2px solid aqua';
  section.style.paddingLeft = '10px';
  section.style.paddingRight = '10px';
  section.style.margin = 'auto';
  section.style.position = 'relative';

  document.body.append(section);

  let p1 = document.createElement('p');
  let p2 = document.createElement('p');
  let p3 = document.createElement('p');
  p1.textContent = `Name: ${event.target.textContent}`;
  p2.textContent = `Owner: ${event.target.dataset.owner}`;
  p3.textContent = `Stars: ${event.target.dataset.stars}`;
  section.append(p1, p2, p3);
  
  let cross = document.createElement('div');
  
  cross.style.width = '35px';
  cross.style.height = '35px';
  cross.style.position = 'absolute';
  cross.style.right = '10px';
  cross.style.top = '10px';
  
  section.append(cross);

  let line1 = document.createElement('div');
  let line2 = document.createElement('div');

  line1.style.height = '1px';
  line2.style.height = '1px';
  line1.style.border = '1px solid gray';
  line2.style.border = '1px solid gray';
  line1.style.marginTop = '50%';
  line2.style.position = 'relative';
  line2.style.bottom = '3px';
  line1.style.transform = 'rotate(45deg)';
  line2.style.transform = 'rotate(-45deg)';

  cross.append(line1, line2);
  
  cross.addEventListener('mouseover', function(event) {
    event.currentTarget.style.cursor = 'pointer';
  }) 

  section.addEventListener('click', function(event) {
    if (event.target.tagName == 'DIV') {
      event.currentTarget.remove();
    } 
  })


  }
})



</script>


</body>
</html>